<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Currency Conversion - TraventureYYC</title>
  <link rel="stylesheet" href="../css/main.css">
</head>
<body>
  <div class="app-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-bar__left">
        <div class="status-bar__time">9:41</div>
      </div>
      <div class="status-bar__right">
        <div class="status-bar__signal">
          <img src="../images/mobile-signal-60.svg" alt="Signal">
        </div>
        <div class="status-bar__wifi">
          <img src="../images/wifi-59.svg" alt="WiFi">
        </div>
        <div class="status-bar__battery">
          <img src="../images/rectangle-56.svg" alt="Battery">
          <img src="../images/combined-shape-57.svg" alt="Battery">
          <img src="../images/rectangle-58.svg" alt="Battery">
        </div>
      </div>
    </div>

    <!-- Top Bar -->
    <div class="top-bar currency-top-bar">
      <a href="homepage.html" class="top-bar__back">←</a>
      <div class="top-bar__logo">
        Traventure<span class="top-bar__logo-accent">YYC</span>
      </div>
      <div class="top-bar__actions">
        <div class="language-selector">
          <span>ENG</span>
          <img src="../images/english-51.png" alt="English" style="width: 20px; height: 20px;">
        </div>
      </div>
    </div>

    <!-- Title row -->
    <div class="currency-header">
      <h1>CURRENCY CONVERSION</h1>
    </div>

    <!-- Content -->
    <div class="content currency-content">
      <div class="currency-card">
        <!-- FROM / AMOUNT -->
        <div class="currency-row">
          <span class="currency-label">Amount</span>
          <div class="currency-row__inner">
            <div class="currency-chip">
              <img id="fromFlag" src="../images/flag-cn.png" alt="CNY" class="currency-flag">
              <select id="fromCurrency" class="currency-select">
                <option value="CNY" data-flag="../images/flag-cn.png" selected>CNY</option>
                <option value="USD" data-flag="../images/flag-us.png">USD</option>
                <option value="CAD" data-flag="../images/flag-ca.png">CAD</option>
                <option value="EUR" data-flag="../images/flag-eu.png">EUR</option>
                <option value="GBP" data-flag="../images/flag-gb.png">GBP</option>
                <option value="KSH" data-flag="../images/flag-ke.png">KSH</option>
              </select>
            </div>
            <input
              type="number"
              id="amount"
              class="currency-input"
              placeholder="500"
              value="500"
            >
          </div>
        </div>

        <!-- Divider + swap icon -->
        <div class="currency-divider-row">
          <div class="currency-divider"></div>
          <button class="currency-swap" type="button" onclick="swapCurrencies()">↕</button>
          <div class="currency-divider"></div>
        </div>

        <!-- TO / CONVERTED -->
        <div class="currency-row">
          <span class="currency-label currency-label--muted">Converted Amount</span>
          <div class="currency-row__inner currency-row__inner--disabled">
            <div class="currency-chip">
              <img id="toFlag" src="../images/flag-ca.png" alt="CAD" class="currency-flag">
              <select id="toCurrency" class="currency-select">
                <option value="CAD" data-flag="../images/flag-ca.png" selected>CAD</option>
                <option value="USD" data-flag="../images/flag-us.png">USD</option>
                <option value="EUR" data-flag="../images/flag-eu.png">EUR</option>
                <option value="GBP" data-flag="../images/flag-gb.png">GBP</option>
                <option value="CNY" data-flag="../images/flag-cn.png">CNY</option>
                <option value="KSH" data-flag="../images/flag-ke.png">KSH</option>
              </select>
            </div>
            <input
              type="text"
              id="convertedAmount"
              class="currency-input"
              placeholder="0.00"
              readonly
            >
          </div>
        </div>
      </div>

      <!-- Convert button -->
      <button class="btn btn--primary btn--full currency-convert-btn" onclick="convertCurrency()">
        CONVERT
      </button>

      <!-- Exchange Rate -->
      <p class="exchange-rate" id="exchangeRate">
        Indicative Exchange Rate<br>
        1 CNY = 0.20 CAD
      </p>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <a href="itinerary.html" class="bottom-nav__item">
        <img src="../images/calendar-39.svg" alt="Itinerary" class="bottom-nav__icon">
        <span class="bottom-nav__label">Itinerary</span>
      </a>
      <a href="homepage.html" class="bottom-nav__item">
        <img src="../images/home-42.svg" alt="Home" class="bottom-nav__icon">
        <span class="bottom-nav__label">Home</span>
      </a>
      <a href="emergency.html" class="bottom-nav__item">
        <img src="../images/icon-emergency-44.png" alt="Emergency" class="bottom-nav__icon">
        <span class="bottom-nav__label">Emergency</span>
      </a>
      <a href="settings.html" class="bottom-nav__item">
        <img src="../images/node-46.png" alt="Settings" class="bottom-nav__icon">
        <span class="bottom-nav__label">Settings</span>
      </a>
    </div>
  </div>

  <script>
    /* ---------- Currency data ---------- */
    const exchangeRates = {
      USD: { CAD: 1.35, EUR: 0.92, GBP: 0.79, CNY: 7.25, KSH: 130 },
      CAD: { USD: 0.74, EUR: 0.68, GBP: 0.58, CNY: 5.37, KSH: 96 },
      EUR: { USD: 1.09, CAD: 1.47, GBP: 0.86, CNY: 7.88, KSH: 141 },
      GBP: { USD: 1.27, CAD: 1.71, EUR: 1.16, CNY: 9.18, KSH: 164 },
      CNY: { USD: 0.14, CAD: 0.20, EUR: 0.13, GBP: 0.11, KSH: 18 },
      KSH: { USD: 0.0077, CAD: 0.010, EUR: 0.0071, GBP: 0.0061, CNY: 0.056 }
    };

    function updateExchangeRate() {
      const from = document.getElementById('fromCurrency').value;
      const to = document.getElementById('toCurrency').value;
      const rate = exchangeRates[from]?.[to] || 1;
      document.getElementById('exchangeRate').innerHTML =
        `Indicative Exchange Rate<br>1 ${from} = ${rate.toFixed(2)} ${to}`;
    }

    function convertCurrency() {
      const from = document.getElementById('fromCurrency').value;
      const to = document.getElementById('toCurrency').value;
      const amount = parseFloat(document.getElementById('amount').value) || 0;
      const rate = exchangeRates[from]?.[to] || 1;
      const converted = (amount * rate).toFixed(2);
      document.getElementById('convertedAmount').value = converted;
      updateExchangeRate();
    }

    function refreshFlags() {
      const fromCurrency = document.getElementById('fromCurrency');
      const toCurrency = document.getElementById('toCurrency');
      const fromFlag = document.getElementById('fromFlag');
      const toFlag = document.getElementById('toFlag');

      const fromOption = fromCurrency.selectedOptions[0];
      const toOption = toCurrency.selectedOptions[0];

      fromFlag.src = fromOption.dataset.flag;
      fromFlag.alt = fromCurrency.value;
      toFlag.src = toOption.dataset.flag;
      toFlag.alt = toCurrency.value;
    }

    function swapCurrencies() {
      const from = document.getElementById('fromCurrency');
      const to = document.getElementById('toCurrency');
      const temp = from.value;
      from.value = to.value;
      to.value = temp;
      refreshFlags();
      convertCurrency();
    }

    document.getElementById('fromCurrency').addEventListener('change', () => {
      refreshFlags();
      convertCurrency();
    });

    document.getElementById('toCurrency').addEventListener('change', () => {
      refreshFlags();
      convertCurrency();
    });

    document.getElementById('amount').addEventListener('input', convertCurrency);

    // init
    refreshFlags();
    convertCurrency();
  </script>
</body>
</html>
