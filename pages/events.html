<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Events - TraventureYYC</title>
  <link rel="stylesheet" href="../css/main.css">

  <!-- Overlay styles copied from attractions -->
  <style>
    .activity-detail-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      justify-content: center;
      align-items: flex-start;
      z-index: 500;
    }
    .activity-detail-overlay.is-visible {
      display: flex;
    }
    .activity-detail-card {
      background: #fdf9f9;
      width: 100%;
      max-width: 414px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .activity-detail-hero {
      position: relative;
      overflow: hidden;
      border-bottom-left-radius: 24px;
      border-bottom-right-radius: 24px;
    }
    .activity-detail-hero img {
      width: 100%;
      height: 210px;
      object-fit: cover;
      display: block;
    }
    .activity-detail-hero-top {
      position: absolute;
      top: 12px;
      left: 12px;
      right: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .activity-detail-back {
      width: 32px;
      height: 32px;
      border-radius: 16px;
      border: none;
      background: #ffffffdd;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    .activity-detail-hero-right {
      display: flex;
      gap: 8px;
    }
    .icon-button {
      width: 36px;
      height: 36px;
      border-radius: 18px;
      border: none;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      cursor: pointer;
    }
    .icon-button.is-active {
      background: #ff6b81;
      color: #fff;
    }
    .activity-detail-hero-title-wrap {
      position: absolute;
      bottom: 16px;
      left: 16px;
      right: 16px;
    }
    .activity-detail-hero-title {
      color: #ffffff;
      font-weight: 700;
      font-size: 20px;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
    }
    .activity-detail-body {
      padding: 16px;
      overflow-y: auto;
    }
    .activity-detail-body p {
      margin-bottom: 8px;
      font-size: 14px;
      line-height: 1.4;
    }
    .activity-detail-address {
      font-weight: 600;
    }
  </style>
</head>

<body>
  <div class="app-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-bar__left">
        <div class="status-bar__time">9:41</div>
      </div>
      <div class="status-bar__right">
        <div class="status-bar__signal">
          <img src="../images/mobile-signal-60.svg" alt="Signal">
        </div>
        <div class="status-bar__wifi">
          <img src="../images/wifi-59.svg" alt="WiFi">
        </div>
        <div class="status-bar__battery">
          <img src="../images/combined-shape-57.svg" alt="Battery">
          <img src="../images/rectangle-58.svg" alt="Battery">
        </div>
      </div>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
      <a href="homepage.html" style="color: var(--color-text-black); font-size: x-large;">‚Üê</a>
      <div class="top-bar__logo">
        Traventure<span class="top-bar__logo-accent">YYC</span>
      </div>
      <div class="top-bar__actions">
        <a href="signup.html"
           style="color: var(--color-primary); font-size: 14px; margin-right: var(--spacing-sm);">
          Sign up
        </a>

        <div class="language-selector">
          <button class="lang-btn">
            <span class="lang-text">ENG</span>
            <img src="../images/english-51.png" alt="English" class="flag-icon">
          </button>
          <div class="lang-menu">
            <div class="lang-option" data-lang="en">English</div>
            <div class="lang-option" data-lang="fr">Fran√ßais</div>
            <div class="lang-option" data-lang="es">Espa√±ol</div>
            <div class="lang-option" data-lang="ch">‰∏≠Êñá</div>
            <div class="lang-option" data-lang="jp">Êó•Êú¨Ë™û</div>
          </div>
        </div>
      </div>
    </div>

    <script src="../js/app.js"></script>

    <!-- Content -->
    <div class="content">
      <h1 style="font-size: 24px; font-weight: 700; margin-bottom: var(--spacing-md);">
        Calgary's Events
      </h1>

      <!-- Search Bar -->
      <div class="search-bar">
        <span>üîç</span>
        <input type="text" class="search-bar__input" placeholder="Search events...">
      </div>

      <!-- EVENTS LIST -->
      <div class="list-item" data-id="canada-day" data-type="event">
        <img src="../images/events-image-30.png" class="list-item__image">
        <div class="list-item__content">
          <div class="list-item__title">Canada Day in Calgary</div>
          <div class="list-item__subtitle">July 1st</div>
        </div>
        <div class="list-item__actions">
          <img src="../images/heart-icon-36.png" class="list-item__icon">
          <span class="add-to-itinerary-btn" style="font-size: 20px;">+</span>
        </div>
      </div>

      <div class="list-item" data-id="stampede" data-type="event">
        <img src="../images/events-image-30.png" class="list-item__image">
        <div class="list-item__content">
          <div class="list-item__title">Calgary Stampede</div>
          <div class="list-item__subtitle">July 3 - July 12</div>
        </div>
        <div class="list-item__actions">
          <img src="../images/heart-icon-36.png" class="list-item__icon">
          <span class="add-to-itinerary-btn" style="font-size: 20px;">+</span>
        </div>
      </div>

      <div class="list-item" data-id="vancouver-match" data-type="event">
        <img src="../images/events-image-30.png" class="list-item__image">
        <div class="list-item__content">
          <div class="list-item__title">WBC FC Vancouver</div>
          <div class="list-item__subtitle">July 8</div>
        </div>
        <div class="list-item__actions">
          <img src="../images/heart-icon-36.png" class="list-item__icon">
          <span class="add-to-itinerary-btn" style="font-size: 20px;">+</span>
        </div>
      </div>

      <div class="list-item" data-id="coca-cola-stage" data-type="event">
        <img src="../images/events-image-30.png" class="list-item__image">
        <div class="list-item__content">
          <div class="list-item__title">Coca-Cola Stage</div>
          <div class="list-item__subtitle">Live music & performances</div>
        </div>
        <div class="list-item__actions">
          <img src="../images/heart-icon-36.png" class="list-item__icon">
          <span class="add-to-itinerary-btn" style="font-size: 20px;">+</span>
        </div>
      </div>
    </div>

    <!-- EVENT DETAIL OVERLAY -->
    <div id="eventDetailOverlay" class="activity-detail-overlay">
      <div class="activity-detail-card">
        <div class="activity-detail-hero">
          <img id="eventDetailImage" src="" alt="Event image">

          <div class="activity-detail-hero-top">
            <button type="button" class="activity-detail-back" id="eventDetailBack">‚Üê</button>

            <div class="activity-detail-hero-right">
              <button type="button" class="icon-button" id="eventDetailFav">‚ô°</button>
              <button type="button" class="icon-button" id="eventDetailAdd">+</button>
            </div>
          </div>

          <div class="activity-detail-hero-title-wrap">
            <span id="eventDetailTitleHero" class="activity-detail-hero-title">TITLE</span>
          </div>
        </div>

        <div class="activity-detail-body">
          <p id="eventDetailIntro"></p>
          <p id="eventDetailDate" class="activity-detail-address"></p>
          <p id="eventDetailParagraph"></p>

          <button type="button" id="eventDetailLearnMore"
                  class="btn btn--primary btn--full" style="margin-top: 16px;">
            Learn more ‚ûú
          </button>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <a href="itinerary.html" class="bottom-nav__item">
        <img src="../images/calendar-39.svg" class="bottom-nav__icon">
        <span class="bottom-nav__label">Itinerary</span>
      </a>
      <a href="homepage.html" class="bottom-nav__item">
        <img src="../images/home-42.svg" class="bottom-nav__icon">
        <span class="bottom-nav__label">Home</span>
      </a>
      <a href="emergency.html" class="bottom-nav__item">
        <img src="../images/icon-emergency-44.png" class="bottom-nav__icon">
        <span class="bottom-nav__label">Emergency</span>
      </a>
      <a href="settings.html" class="bottom-nav__item">
        <img src="../images/node-46.png" class="bottom-nav__icon">
        <span class="bottom-nav__label">Settings</span>
      </a>
    </div>
  </div>

  <script src="../js/app.js"></script>

  <!-- EVENT DETAILS DATA -->
  <script>
    const EVENT_DETAILS = {
      "canada-day": {
        intro: "City-wide celebration with concerts, performances, and fireworks.",
        date: "July 1 ‚Ä¢ All day",
        description:
          "Canada Day in Calgary includes live music stages, Indigenous programming, family entertainment zones, food trucks, and evening fireworks along the river.",
        learnMoreUrl: "https://www.calgary.ca/CanadaDay"
      },
      "stampede": {
        intro: "The Greatest Outdoor Show on Earth.",
        date: "July 3 ‚Äì July 12",
        description:
          "The Calgary Stampede features rodeos, parades, live music, night shows, performances, exhibitions, a full midway, and incredible food experiences.",
        learnMoreUrl: "https://www.calgarystampede.com/"
      },
      "vancouver-match": {
        intro: "Live soccer match experience with energetic fan culture.",
        date: "July 8 ‚Ä¢ Evening match",
        description:
          "A major soccer event that draws fans from Calgary and beyond. Expect cheering crowds, merchandise booths, photo areas, and pre-game fan activities.",
        learnMoreUrl: "https://www.whitecapsfc.com/"
      },
      "coca-cola-stage": {
        intro: "Live outdoor concerts featuring artists from across North America.",
        date: "Evenings throughout Stampede",
        description:
          "The Coca-Cola Stage offers free concerts with full sound and lighting. It's one of the Stampede's most popular attractions for music lovers.",
        learnMoreUrl: "https://www.calgarystampede.com/stampede/music"
      }
    };
  </script>

  <!-- OVERLAY LOGIC (same as attractions, adjusted for events) -->
  <script>

    (function setupEventDetailOverlay() {
      const overlay = document.getElementById("eventDetailOverlay");
      if (!overlay) return;

      const imgEl = document.getElementById("eventDetailImage");
      const titleHeroEl = document.getElementById("eventDetailTitleHero");
      const introEl = document.getElementById("eventDetailIntro");
      const dateEl = document.getElementById("eventDetailDate");
      const descEl = document.getElementById("eventDetailParagraph");
      const learnBtn = document.getElementById("eventDetailLearnMore");
      const backBtn = document.getElementById("eventDetailBack");
      const favBtn = document.getElementById("eventDetailFav");
      const addBtn = document.getElementById("eventDetailAdd");

      let currentId = null;
      let currentUrl = null;

      function openOverlay(card) {
        const id = card.dataset.id;
        currentId = id;

        const title = card.querySelector(".list-item__title")?.textContent.trim() || "";
        const img = card.querySelector(".list-item__image")?.src || "";
        const details = EVENT_DETAILS[id] || {};

        imgEl.src = img;
        imgEl.alt = title;
        titleHeroEl.textContent = title;
        introEl.textContent = details.intro || "";
        dateEl.textContent = "Date: " + (details.date || "");
        descEl.textContent = details.description || "";
        currentUrl = details.learnMoreUrl || "#";

        const favorites = loadFavorites();
        const isFav = favorites.some(f => f.id === id);
        favBtn.classList.toggle("is-active", isFav);
        favBtn.textContent = isFav ? "‚ô•" : "‚ô°";

        overlay.classList.add("is-visible");
      }

      // Open overlay on card click (not icons)
      document.querySelectorAll(".list-item").forEach(card => {
        card.addEventListener("click", (e) => {
          if (e.target.closest(".list-item__actions")) return;
          openOverlay(card);
        });
      });

      backBtn.addEventListener("click", () => {
        overlay.classList.remove("is-visible");
      });

      learnBtn.addEventListener("click", () => {
        if (currentUrl) window.open(currentUrl, "_blank");
      });

      favBtn.addEventListener("click", () => {
        const favorites = loadFavorites();
        const idx = favorites.findIndex(f => f.id === currentId);

        if (idx >= 0) {
          favorites.splice(idx, 1);
          favBtn.textContent = "‚ô°";
          favBtn.classList.remove("is-active");
        } else {
          favorites.push({
            id: currentId,
            title: titleHeroEl.textContent,
            type: "event"
          });
          favBtn.textContent = "‚ô•";
          favBtn.classList.add("is-active");
        }
        saveFavorites(favorites);
      });

      addBtn.addEventListener("click", () => {
        const pending = {
          title: titleHeroEl.textContent,
          date: new Date().toISOString().slice(0, 10),
          startTime: "13:00",
          endTime: "14:00",
          location: ""
        };

        sessionStorage.setItem(
          "pendingItineraryData",
          JSON.stringify(pending)
        );

        window.location.href = "itinerary-edit.html";
      });
    })();

  </script>

</body>
</html>
