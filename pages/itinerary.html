<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Itinerary - TraventureYYC</title>
  <link rel="stylesheet" href="../css/main.css">
</head>
<body>
  <div class="app-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-bar__left">
        <div class="status-bar__time">9:41</div>
      </div>
      <div class="status-bar__right">
        <div class="status-bar__signal">
          <img src="../images/mobile-signal-60.svg" alt="Signal">
        </div>
        <div class="status-bar__wifi">
          <img src="../images/wifi-59.svg" alt="WiFi">
        </div>
        <div class="status-bar__battery">
          <img src="../images/combined-shape-57.svg" alt="Battery">
          <img src="../images/rectangle-58.svg" alt="Battery">
        </div>
      </div>
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
      <a href="homepage.html" style="color: var(--color-text-black);">‚Üê</a>
      <div class="top-bar__logo">
        Itinerary
      </div>
      <div class="top-bar__actions">
        <a href="itinerary-add.html" style="color: var(--color-primary); font-size: 24px; font-weight: bold;">+</a>
      </div>
    </div>

    <!-- Content -->
    <div class="content itinerary-page">
      <!-- Padding Overlay - creates colored frame on top of content -->
      <div class="content-padding-overlay">
        <div class="padding-overlay-top"></div>
        <div class="padding-overlay-bottom"></div>
        <div class="padding-overlay-left"></div>
        <div class="padding-overlay-right"></div>
      </div>
      
      <!-- Date Selector Wrapper -->
      <div class="date-selector-wrapper">
        <div class="date-selector" id="dateSelector">
          <!-- Dates will be generated by JavaScript -->
        </div>
        <!-- Current Date Display -->
        <div class="current-date-display">
          <h2 id="currentDateDisplay">Tuesday - July 14, 2026</h2>
        </div>
      </div>

      <!-- Timeline Container -->
      <div class="timeline-container" id="timelineContainer">
        <div class="timeline" id="timeline">
          <!-- Timeline items will be generated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <a href="itinerary.html" class="bottom-nav__item active">
        <img src="../images/calendar-39.svg" alt="Itinerary" class="bottom-nav__icon">
        <span class="bottom-nav__label">Itinerary</span>
      </a>
      <a href="homepage.html" class="bottom-nav__item">
        <img src="../images/home-42.svg" alt="Home" class="bottom-nav__icon">
        <span class="bottom-nav__label">Home</span>
      </a>
      <a href="emergency.html" class="bottom-nav__item">
        <img src="../images/icon-emergency-44.png" alt="Emergency" class="bottom-nav__icon">
        <span class="bottom-nav__label">Emergency</span>
      </a>
      <a href="settings.html" class="bottom-nav__item">
        <img src="../images/node-46.png" alt="Settings" class="bottom-nav__icon">
        <span class="bottom-nav__label">Settings</span>
      </a>
    </div>
  </div>

  <!-- Your global JS -->
  <script src="../js/app.js"></script>

  <!-- Itinerary-specific JS -->
  <script>
    /* ------------------------------
       1. DEFAULT ITINERARY DATA
       ------------------------------ */

    const DEFAULT_ITINERARY_DATA = {
      '2026-07-11': {
        date: 'Saturday - July 11, 2026',
        events: [
          {
            time: '10:00',
            title: 'Calgary Zoo',
            details: '10:00 - 13:00',
            address: "210 St. George's Drive NE, Calgary, AB T2E 7V6"
          },
          {
            time: '14:00',
            title: 'Glenbow Museum',
            details: '14:00 - 16:00',
            address: '130 9 Ave SE, Calgary, AB T2G 0P3'
          }
        ]
      },
      '2026-07-12': {
        date: 'Sunday - July 12, 2026',
        events: [
          {
            time: '09:00',
            title: 'Heritage Park',
            details: '09:00 - 12:00',
            address: '1900 Heritage Dr SW, Calgary, AB T2V 2X3'
          },
          {
            time: '14:00',
            title: 'Olympic Plaza',
            details: '14:00 - 15:00',
            address: '228 8 Ave SE, Calgary, AB T2G 0K6'
          },
          {
            time: '17:00',
            title: 'Calgary Tower',
            details: '17:00 - 19:00',
            address: '101 9 Ave SW, Calgary, AB T2P 1J9'
          }
        ]
      },
      '2026-07-13': {
        date: 'Monday - July 13, 2026',
        events: [
          {
            time: '11:00',
            title: "Prince's Island Park",
            details: '11:00 - 13:00',
            address: '698 Eau Claire Ave SW, Calgary, AB T2P 5N4'
          },
          {
            time: '15:00',
            title: 'Bow River Pathway',
            details: '15:00 - 17:00',
            address: 'Along Bow River, Calgary, AB'
          }
        ]
      },
      '2026-07-14': {
        date: 'Tuesday - July 14, 2026',
        events: [
          {
            time: '10:00',
            title: 'Calgary Zoo',
            details: '10:00 - 13:00',
            address: "210 St. George's Drive NE, Calgary, AB T2E 7V6"
          },
          {
            time: '13:00',
            title: 'Peace Bridge',
            details: '13:00 - 14:00',
            address: '98 Memorial Dr NW, Calgary, AB T2N 5C1'
          },
          {
            time: '17:15',
            title: 'Ten Foot Henry',
            details: '17:15 - 19:00',
            address: '1209 1 St SW, Calgary, AB T2R 0V3'
          },
          {
            time: '19:00',
            title: 'Avesta Shawarma',
            details: '19:00 - 20:00',
            address: '698 Eau Claire Ave SW, Calgary, AB T2P 5N4'
          }
        ]
      },
      '2026-07-15': {
        date: 'Wednesday - July 15, 2026',
        events: [
          {
            time: '09:00',
            title: 'Studio Bell',
            details: '09:00 - 11:00',
            address: '850 4 St SE, Calgary, AB T2G 0L8'
          },
          {
            time: '12:00',
            title: 'Stephen Avenue Walk',
            details: '12:00 - 14:00',
            address: 'Stephen Ave, Calgary, AB'
          },
          {
            time: '16:00',
            title: 'Calgary Farmers Market',
            details: '16:00 - 18:00',
            address: '510 77 Ave SE, Calgary, AB T2H 1C3'
          }
        ]
      },
      '2026-07-16': {
        date: 'Thursday - July 16, 2026',
        events: [
          {
            time: '10:00',
            title: 'Fish Creek Provincial Park',
            details: '10:00 - 13:00',
            address: '15979 Bow Bottom Trail SE, Calgary, AB T2J 7A4'
          },
          {
            time: '15:00',
            title: 'Nose Hill Park',
            details: '15:00 - 17:00',
            address: '5620 14 St NW, Calgary, AB T2K 1J7'
          }
        ]
      },
      '2026-07-17': {
        date: 'Friday - July 17, 2026',
        events: [
          {
            time: '11:00',
            title: 'Calgary Stampede',
            details: '11:00 - 18:00',
            address: '1410 Olympic Way SE, Calgary, AB T2G 2W1'
          },
          {
            time: '19:00',
            title: 'Chuckwagon Races',
            details: '19:00 - 21:00',
            address: 'Stampede Park, Calgary, AB'
          }
        ]
      },
      '2026-07-18': {
        date: 'Saturday - July 18, 2026',
        events: [
          {
            time: '10:00',
            title: 'Calgary Stampede',
            details: '10:00 - 17:00',
            address: '1410 Olympic Way SE, Calgary, AB T2G 2W1'
          },
          {
            time: '18:00',
            title: 'Evening Concert',
            details: '18:00 - 21:00',
            address: 'Coca-Cola Stage, Stampede Park'
          }
        ]
      },
      '2026-07-19': {
        date: 'Sunday - July 19, 2026',
        events: []
      },
      '2026-07-20': {
        date: 'Monday - July 20, 2026',
        events: [
          {
            time: '14:00',
            title: 'Shopping at Chinook Centre',
            details: '14:00 - 17:00',
            address: '6455 Macleod Trail SW, Calgary, AB T2H 0K8'
          }
        ]
      }
    };

    // Global itinerary object used on this page
    let itineraryData = {};

    // Load itinerary data - always start with defaults, then merge any stored changes
    function loadItineraryData() {
      // Always start with a deep copy of default data to ensure all days are present
      itineraryData = JSON.parse(JSON.stringify(DEFAULT_ITINERARY_DATA));
      
      try {
        const stored = sessionStorage.getItem('itineraryData');
        if (stored) {
          const storedData = JSON.parse(stored);
          // Only override dates that have events in stored data
          // Keep defaults for dates that are missing or empty in stored data
          Object.keys(storedData).forEach(dateStr => {
            if (storedData[dateStr] && storedData[dateStr].events && storedData[dateStr].events.length > 0) {
              // Only override if stored data has events
              itineraryData[dateStr] = storedData[dateStr];
            }
          });
        }
      } catch (e) {
        console.warn('Could not read itineraryData from sessionStorage, using defaults', e);
        // itineraryData already has defaults
      }
      
      // Ensure all default dates are present with their events
      Object.keys(DEFAULT_ITINERARY_DATA).forEach(dateStr => {
        if (!itineraryData[dateStr] || !itineraryData[dateStr].events || itineraryData[dateStr].events.length === 0) {
          // If date is missing or empty, use default (unless default is also empty like July 19)
          if (DEFAULT_ITINERARY_DATA[dateStr].events && DEFAULT_ITINERARY_DATA[dateStr].events.length > 0) {
            itineraryData[dateStr] = JSON.parse(JSON.stringify(DEFAULT_ITINERARY_DATA[dateStr]));
          } else if (!itineraryData[dateStr]) {
            // Keep empty dates as empty, but ensure the date structure exists
            itineraryData[dateStr] = JSON.parse(JSON.stringify(DEFAULT_ITINERARY_DATA[dateStr]));
          }
        }
      });
    }

    /* ------------------------------
       2. DATE STRIP + TIMELINE
       ------------------------------ */

    // Generate dates (14 days starting from July 11, 2026)
    function generateDates() {
      const dateSelector = document.getElementById('dateSelector');
      const startYear = 2026;
      const startMonth = 6; // July (0-indexed)
      const startDay = 11;
      const dates = [];
      
      for (let i = 0; i < 14; i++) {
        const date = new Date(startYear, startMonth, startDay + i);
        dates.push(date);
      }

      dates.forEach((date, index) => {
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        
        const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const monthName = monthNames[date.getMonth()];
        
        const dateTab = document.createElement('div');
        dateTab.className = 'date-tab';
        dateTab.dataset.date = dateStr;
        if (index === 3) { // July 14 default
          dateTab.classList.add('active');
        }
        
        dateTab.innerHTML = `
          <span class="date-tab__day">${day}${getDaySuffix(day)}</span>
          <span class="date-tab__month">${monthName}</span>
        `;
        
        dateSelector.appendChild(dateTab);
      });

      // Initial date
      updateTimeline('2026-07-14');
    }

    function getDaySuffix(day) {
      if (day > 3 && day < 21) return 'th';
      switch (day % 10) {
        case 1: return 'st';
        case 2: return 'nd';
        case 3: return 'rd';
        default: return 'th';
      }
    }

    function updateTimeline(dateStr) {
      const timeline = document.getElementById('timeline');
      const timelineContainer = document.getElementById('timelineContainer');
      const currentDateDisplay = document.getElementById('currentDateDisplay');
      const data = itineraryData[dateStr];

      // Fade out
      timelineContainer.classList.add('fade-out');

      setTimeout(() => {
        if (!data) {
          timeline.innerHTML = '<div class="timeline-empty"><div class="timeline-empty__icon">üìÖ</div><div class="timeline-empty__text">No events scheduled</div></div>';
          currentDateDisplay.textContent = 'No date selected';
          timelineContainer.classList.remove('fade-out');
          return;
        }

        currentDateDisplay.textContent = data.date;

        if (!data.events || data.events.length === 0) {
          timeline.innerHTML = '<div class="timeline-empty"><div class="timeline-empty__icon">üìÖ</div><div class="timeline-empty__text">No events scheduled for this day</div></div>';
          timelineContainer.classList.remove('fade-out');
          return;
        }

        timeline.innerHTML = data.events.map((event, index) => {
          let imageHtml = '';

          if (event.title === 'Calgary Zoo') {
            imageHtml = `<img class="timeline-event__image" src="../images/calgaryZOO.png" alt="Calgary Zoo">`;
          } else if (event.title === 'Peace Bridge') {
            imageHtml = `<img class="timeline-event__image" src="../images/The_Peace_Bridge_in_Calgary_an_HDR_photo.png" alt="Peace Bridge">`;
          } else if (event.title === 'Ten Foot Henry') {
            imageHtml = `<img class="timeline-event__image" src="../images/tenfoothenry.png" alt="Ten Foot Henry">`;
          } else if (event.title === 'Avesta Shawarma') {
            imageHtml = `<img class="timeline-event__image" src="../images/avesta.png" alt="Avesta Shawarma">`;
          } else if (event.title === 'River Caf√©' || event.title === 'River Cafe') {
            imageHtml = `<img class="timeline-event__image" src="../images/riverCafe.png" alt="River Caf√©">`;
          } else if (event.title === 'Studio Bell') {
            imageHtml = `<img class="timeline-event__image" src="../images/StudioBell.png" alt="Studio Bell">`;
          } else if (event.title === 'Stephen Avenue Walk') {
            imageHtml = `<img class="timeline-event__image" src="../images/stephen-avenue.png" alt="Stephen Avenue Walk">`;
          } else if (event.title === 'Calgary Farmers Market') {
            imageHtml = `<img class="timeline-event__image" src="../images/calgary_farmers_market.png" alt="Calgary Farmers Market">`;
          } else if (event.title === 'Fish Creek Provincial Park') {
            imageHtml = `<img class="timeline-event__image" src="../images/fish_creek_provincial_park.png" alt="Fish Creek Provincial Park">`;
          } else if (event.title === 'Bow River Pathway') {
            imageHtml = `<img class="timeline-event__image" src="../images/Bow River Pathway.png" alt="Bow River Pathway">`;
          } else if (event.title === "Prince's Island Park") {
            imageHtml = `<img class="timeline-event__image" src="../images/princes-island-park.png" alt="Prince's Island Park">`;
          } else if (event.title === 'Nose Hill Park') {
            imageHtml = `<img class="timeline-event__image" src="../images/Nose Hill Park.png" alt="Nose Hill Park">`;
          } else if (event.title === 'Calgary Stampede') {
            imageHtml = `<img class="timeline-event__image" src="../images/Calgary Stampede.png" alt="Calgary Stampede">`;
          } else if (event.title === 'Chuckwagon Races') {
            imageHtml = `<img class="timeline-event__image" src="../images/Chuckwagon Races.png" alt="Chuckwagon Races">`;
          } else if (event.title === 'Evening Concert') {
            imageHtml = `<img class="timeline-event__image" src="../images/Evening Concert- Coca-Cola Stage.png" alt="Evening Concert">`;
          } else if (event.title === 'Shopping at Chinook Centre') {
            imageHtml = `<img class="timeline-event__image" src="../images/Shopping at Chinook Centre.png" alt="Shopping at Chinook Centre">`;
          } else if (event.title === 'Heritage Park') {
            imageHtml = `<img class="timeline-event__image" src="../images/Heritage Park.png" alt="Heritage Park">`;
          } else if (event.title === 'Olympic Plaza') {
            imageHtml = `<img class="timeline-event__image" src="../images/Olympic Plaza.png" alt="Olympic Plaza">`;
          } else if (event.title === 'Calgary Tower') {
            imageHtml = `<img class="timeline-event__image" src="../images/Calgary Tower.png" alt="Calgary Tower">`;
          } else if (event.title === 'Glenbow Museum') {
            imageHtml = `<img class="timeline-event__image" src="../images/Glenbow Museum.png" alt="Glenbow Museum">`;
          }

          // Note: no notes/description rendered here ‚Äì just title, time, address
          return `
            <div class="timeline-item" style="animation-delay: ${index * 0.1}s">
              <div class="timeline-time">${event.time}</div>
              <div class="timeline-event"
                   onclick="sessionStorage.setItem('lastViewedDate', '${dateStr}');
                            window.location.href='itinerary-detail.html?date=${dateStr}&index=${index}'">
                ${imageHtml}
                <div class="timeline-event__title">${event.title}</div>
                <div class="timeline-event__details">${event.details}</div>
                <div class="timeline-event__address">${event.address}</div>
              </div>
            </div>
          `;
        }).join('');

        timelineContainer.classList.remove('fade-out');

        const contentArea = document.querySelector('.itinerary-page.content');
        if (contentArea) {
          contentArea.scrollTop = 0;
        }
      }, 150);
    }

    let currentActiveDate = '2026-07-14';

    function handleDateScroll() {
      const dateSelector = document.getElementById('dateSelector');
      const dateTabs = Array.from(dateSelector.querySelectorAll('.date-tab'));
      const containerWidth = dateSelector.offsetWidth;
      const scrollLeft = dateSelector.scrollLeft;
      const center = scrollLeft + containerWidth / 2;

      let closestTab = null;
      let closestDistance = Infinity;

      dateTabs.forEach((tab) => {
        const tabLeft = tab.offsetLeft;
        const tabWidth = tab.offsetWidth;
        const tabCenter = tabLeft + tabWidth / 2;
        const distance = Math.abs(center - tabCenter);

        if (distance < closestDistance) {
          closestDistance = distance;
          closestTab = tab;
        }
      });

      dateTabs.forEach((tab) => {
        const tabLeft = tab.offsetLeft;
        const tabWidth = tab.offsetWidth;
        const tabCenter = tabLeft + tabWidth / 2;
        const pixelDistance = Math.abs(center - tabCenter);

        const threshold1 = 60;
        const threshold2 = 120;
        const threshold3 = 180;
        
        let scale, opacity, minWidth, maxWidth, padding, dayFontSize, monthFontSize;
        
        tab.classList.remove('active');
        
        if (pixelDistance < 30) {
          scale = 1.1;
          opacity = 1;
          minWidth = 55;
          maxWidth = 63;
          padding = 'var(--spacing-xs) var(--spacing-sm)';
          dayFontSize = '16px';
          monthFontSize = '11px';
          tab.classList.add('active');
        } else if (pixelDistance < threshold1) {
          scale = 0.9;
          opacity = 0.85;
          minWidth = 46;
          maxWidth = 54;
          padding = 'var(--spacing-xs) var(--spacing-sm)';
          dayFontSize = '14px';
          monthFontSize = '10px';
        } else if (pixelDistance < threshold2) {
          scale = 0.8;
          opacity = 0.7;
          minWidth = 42;
          maxWidth = 48;
          padding = 'var(--spacing-xs) var(--spacing-sm)';
          dayFontSize = '12px';
          monthFontSize = '9px';
        } else if (pixelDistance < threshold3) {
          scale = 0.7;
          opacity = 0.6;
          minWidth = 38;
          maxWidth = 44;
          padding = 'var(--spacing-xs) var(--spacing-sm)';
          dayFontSize = '11px';
          monthFontSize = '8px';
        } else {
          scale = 0.65;
          opacity = 0.5;
          minWidth = 35;
          maxWidth = 40;
          padding = 'var(--spacing-xs) var(--spacing-sm)';
          dayFontSize = '10px';
          monthFontSize = '7px';
        }
        
        tab.style.transform = `scale(${scale})`;
        tab.style.opacity = opacity;
        tab.style.minWidth = `${minWidth}px`;
        tab.style.maxWidth = `${maxWidth}px`;
        tab.style.padding = padding;
        
        const dayElement = tab.querySelector('.date-tab__day');
        const monthElement = tab.querySelector('.date-tab__month');
        if (dayElement) dayElement.style.fontSize = dayFontSize;
        if (monthElement) monthElement.style.fontSize = monthFontSize;
      });

      if (closestTab) {
        const selectedDate = closestTab.dataset.date;
        if (selectedDate !== currentActiveDate) {
          currentActiveDate = selectedDate;
          updateTimeline(selectedDate);
        }
      }
    }

    function updatePaddingOverlayHeight() {
      const dateSelectorWrapper = document.querySelector('.date-selector-wrapper');
      const topOverlay = document.querySelector('.padding-overlay-top');
      const leftOverlay = document.querySelector('.padding-overlay-left');
      const rightOverlay = document.querySelector('.padding-overlay-right');
      
      if (dateSelectorWrapper && topOverlay) {
        const wrapperHeight = dateSelectorWrapper.offsetHeight;
        const spacingMd = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--spacing-md')) || 16;
        const overlayHeight = wrapperHeight + spacingMd;
        
        topOverlay.style.height = `${overlayHeight}px`;
        if (leftOverlay) leftOverlay.style.height = `${overlayHeight}px`;
        if (rightOverlay) rightOverlay.style.height = `${overlayHeight}px`;
      }
    }

    /* ------------------------------
       3. INIT
       ------------------------------ */

    document.addEventListener('DOMContentLoaded', () => {
      loadItineraryData();
      generateDates();
      
      const dateSelector = document.getElementById('dateSelector');
      
      const storedDate = sessionStorage.getItem('lastViewedDate');
      const initialDate = storedDate || '2026-07-14';
      if (storedDate) sessionStorage.removeItem('lastViewedDate');
      
      setTimeout(() => {
        const dateTabs = Array.from(dateSelector.querySelectorAll('.date-tab'));
        const activeTab =
          dateTabs.find(tab => tab.dataset.date === initialDate) ||
          dateTabs.find(tab => tab.dataset.date === '2026-07-14') ||
          dateTabs[3];

        if (activeTab) {
          const selectedDate = activeTab.dataset.date;
          currentActiveDate = selectedDate;
          updateTimeline(selectedDate);
          
          const containerWidth = dateSelector.offsetWidth;
          const scrollPosition =
            activeTab.offsetLeft - (containerWidth / 2) + (activeTab.offsetWidth / 2);
          dateSelector.scrollTo({ left: scrollPosition, behavior: 'auto' });
          
          setTimeout(() => {
            handleDateScroll();
            updatePaddingOverlayHeight();
          }, 50);
        }
      }, 200);
      
      window.addEventListener('resize', updatePaddingOverlayHeight);

      let scrollTimeout;
      dateSelector.addEventListener('scroll', () => {
        handleDateScroll();
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          handleDateScroll();
        }, 100);
      }, { passive: true });

      dateSelector.addEventListener('touchend', () => {
        setTimeout(() => {
          const dateTabs = Array.from(dateSelector.querySelectorAll('.date-tab'));
          const containerWidth = dateSelector.offsetWidth;
          const scrollLeft = dateSelector.scrollLeft;
          const center = scrollLeft + containerWidth / 2;

          let closestTab = null;
          let closestDistance = Infinity;

          dateTabs.forEach((tab) => {
            const tabLeft = tab.offsetLeft;
            const tabWidth = tab.offsetWidth;
            const tabCenter = tabLeft + tabWidth / 2;
            const distance = Math.abs(center - tabCenter);

            if (distance < closestDistance) {
              closestDistance = distance;
              closestTab = tab;
            }
          });

          if (closestTab) {
            const selectedDate = closestTab.dataset.date;
            if (selectedDate && selectedDate !== currentActiveDate) {
              currentActiveDate = selectedDate;
              updateTimeline(selectedDate);
            }
            
            const scrollPosition =
              closestTab.offsetLeft - (containerWidth / 2) + (closestTab.offsetWidth / 2);
            dateSelector.scrollTo({ left: scrollPosition, behavior: 'smooth' });
          }
          
          setTimeout(() => {
            handleDateScroll();
          }, 150);
        }, 100);
      }, { passive: true });

      dateSelector.addEventListener('click', (e) => {
        const dateTab = e.target.closest('.date-tab');
        if (dateTab) {
          const selectedDate = dateTab.dataset.date;
          if (selectedDate && selectedDate !== currentActiveDate) {
            currentActiveDate = selectedDate;
            updateTimeline(selectedDate);
          }
          
          const containerWidth = dateSelector.offsetWidth;
          const scrollPosition =
            dateTab.offsetLeft - (containerWidth / 2) + (dateTab.offsetWidth / 2);
          dateSelector.scrollTo({ left: scrollPosition, behavior: 'smooth' });
          
          setTimeout(() => {
            handleDateScroll();
          }, 300);
        }
      });

      if ('onscrollend' in dateSelector) {
        dateSelector.addEventListener('scrollend', handleDateScroll);
      }
    });
  </script>
</body>
</html>
